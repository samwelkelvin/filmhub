<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMDB</title>
</head>
<body>
<div class="container">
    <script>
        var url = "https://api.themoviedb.org/3/movie/now_playing?api_key=<<api_key>>&language=en-US&page=1";
            // var request = new XMLHttpRequest();
            // request.open('GET', url);
            // request.responseType = 'json';
            // request.send();

    let token = `eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYTVkNzgxOTU4MzUxN2E4ODQwYzAwMzIwZTg5ZDRlNiIsIm5iZiI6MTcyMDY4NTk1Ni4wMzg5Nywic3ViIjoiNjY4ZjkxNjY4OGIwM2Q1MmE4NGE4NjQ0Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.EAiclaAGjDpu0cBCoHJMhjY-_LKTUIh5DWz64wGaXXY`;
    const options = { method: 'GET', headers: { 'Content-type' : 'application/json', 'Authorization': `Bearer ${token}` } };


    let auth = 'authentication';
    let discover = 'discover/movie?language=en-US&page=500';
    let search = 'search/movie';
    let popular = 'movie/popular';
    let movie = "movie/11";


    fetch(`https://api.themoviedb.org/3/${discover}`, options)
        .then(response => response.json())
        .then(response => {
            console.log(response)
        })
        .catch(err => console.error(err));


    // fetch('https://api.themoviedb.org/3/genre/movie/list?language=en', options)
    //     .then(response => response.json())
    //     .then(response => console.log(response))
    //     .catch(err => console.error(err));

/*
        let cache = {};
            async function getData(url,options) {

                let result = "";
                if (cache[url] !== undefined) return cache[url].value;

                await fetch(url, options)
                    .then(response => response.json())
                    .then(json => cache[url] = { time: new Date(), value: json });

                return cache[url].value;
            }

            // Interval to clear cache;
            setInterval(function () {
                if (Object.keys(cache).length > 0) {
                    let currentTime = new Date();
                    Object.keys(cache).forEach(key => {
                        let seconds = currentTime - cache[key].time;

                        if (seconds > 10000) {
                            delete cache[key];
                            console.log(`${key}'s cache deleted`)
                        }
                    })
                }
            }, 8000);

            

            getData('https://api.themoviedb.org/3/genre/movie/list?language=en', options)
                    .then(data => console.log(data));


            setTimeout(()=>{
                console.log(cache);

            },4000)

*/

    </script>
</div>
</body>
</html>